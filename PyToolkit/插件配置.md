# 插件配置

> &emsp;&emsp;插件配置通过 Content 目录下的 setting.json 实现    

```json
{
    "section":{
        "Model":"建模",
        "Anim":"动画",
        "FX":"特效",
        "Render":"渲染",
        "Msic":"杂项",
        "Help":"帮助"
    },
    "menu":{
        "Model_Tool" : {
            "section": "Model",
            "label": "演示:模型处理工具(打印到屏幕)",
            "type": "PYTHON",
            "command": "unreal.SystemLibrary.print_string(None,'模型处理工具',text_color=[255,255,255,255])"
        },
        "skeletal_socket_tool" : {
            "section": "Anim",
            "label": "Socket 自动化添加工具",
            "type": "COMMAND",
            "command": "py \"{Content}/Anim/skeletal_socket_tool/skeletal_socket_tool.py\""
        },
        "fbx_importer" : {
            "section": "Anim",
            "label": "动画导入比较面板",
            "type": "COMMAND",
            "command": "py \"{Content}/Anim/FBXImporter/main.py\""
        },
        "render_tool" : {
            "section": "Render",
            "label": "Sequencer 批量渲染工具",
            "type": "COMMAND",
            "command": "py \"{Content}/Anim/sequencer_batch_render/render_tool.py\""
        },
        "launcher" : {
            "section": "Msic",
            "label": "UE启动器",
            "type": "COMMAND",
            "command": "py \"{Content}/Msic/UE_Launcher/launcher.py\""
        },
        "renamer" : {
            "section": "Msic",
            "label": "批量改名工具",
            "type": "COMMAND",
            "command": "py \"{Content}/Msic/Renamer/renamer.py\""
        },
        "document" : {
            "section": "Help",
            "label": "帮助文档",
            "type": "PYTHON",
            "command": "import webbrowser;webbrowser.open_new_tab('http://wiki.l0v0.com/PyToolkit/')"
        }
    },
    "script":{
        "initialize": "py \"{Content}/initialize.py\"",
        "launcher":"py \"{Content}/Msic/UE_Launcher/launcher.py\""
    }
}
```

## 脚本配置

> &emsp;&emsp;PyToolkit 通过 C++ 代码在进入引擎界面之后读取 setting.json 里的 script 配置    
> &emsp;&emsp;读取 快捷键 和 初始化 脚本的位置。    
> &emsp;&emsp;通过 {Content} 变量指代插件的 Content 文件夹路径，实现相对路径配置。    

## 菜单配置


    section - 配置分组

    menu
        section - 设置分组
        label - 配置显示名称
        type - 配置 command 执行的类型 可以填写 python 和 command
        command - 根据 type 配置执行相应的命令


> &emsp;&emsp;菜单配置是通过 initialize.py 实现的。    
> &emsp;&emsp;menu 下的命名没有限制，只要不重复即可(json 也不允许记录重复的键值对)    
> &emsp;&emsp;COMMAND 是 unreal 的命令行， py 命令可以执行 python 脚本。    
> &emsp;&emsp;PYTHON 类型则是直接 Python 代码，一般配置较为简单的代码，避免脚本过多~    

## initialize 脚本

> &emsp;&emsp;initialize.py 脚本在 Unreal 里面初始化 Qt 的运行环境。        

> &emsp;&emsp;读取 Content 目录下的 setting.json 配置生成 Unreal 菜单        
> &emsp;&emsp;读取 Content 目录下的 main.css  作为样式补充        

> &emsp;&emsp;重载 QWidget 的 show 方法，实现窗口唯一、Unreal窗口嵌入 以及 dayu_widgets 的样式配置。        
> &emsp;&emsp;如果想要 Qt 原生样式可以使用 `setVisible(True)` 的方法        



